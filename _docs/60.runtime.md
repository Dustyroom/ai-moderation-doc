---
title: "ChatGPT Runtime Usage"
permalink: /runtime/
toc: true
---

The `ChatGpt` class provides a simple and convenient way to interact with the ChatGPT API. It allows you to send requests to the ChatGPT API and receive the response either all at once or in chunks as it is generated.

## Sample Scene

The best way to get started with the ChatGPT API is to open the `[AI Toolbox] Runtime` scene in the `Assets/AiToolbox/Samples/Runtime Usage` folder. This scene demonstrates how to use the `ChatGpt` class to send requests to the ChatGPT API and receive the response.

[Runtime Usage Sample Scene](../images/runtime-sample-screenshot.png) { .image-fancy }

## Methods

### QuickRequest

Sends a request to ChatGPT and receives the whole response at once.

#### Parameters

- `prompt`: The text of the request, e.g. "Generate a character description".
- `parameters`: Settings of the request, represented by a `Parameters` object.
- `completeCallback`: The function to be called on successful completion. ChatGPT response is provided as a parameter.
- `failureCallback`: The function to be called on failure. Error code and message are provided as parameters.

#### Returns

- A function that can be called to cancel the request.

### StreamRequest

Sends a request to ChatGPT and receives the response in chunks as it is generated.

#### Parameters

- `prompt`: The text of the request, e.g. "Generate a character description".
- `parameters`: Settings of the request, represented by a `Parameters` object.
- `updateCallback`: The function to be called for each chunk of the response.
- `completeCallback`: The function to be called on successful completion. ChatGPT response is provided as a parameter.
- `failureCallback`: The function to be called on failure. Error code and message are provided as parameters.
- `owner`: Optional `MonoBehaviour` instance that owns the request.

#### Returns

- A function that can be called to cancel the request.

### CancelAllRequests

Cancels all pending requests.

## Parameters Class

Represents the settings for the AI Toolbox ChatGPT requests.

The best way to use the `Parameters` class is to expose it as a public field in a `MonoBehaviour` class. This way you can set the parameters in the Unity Inspector.

```csharp
using AiToolbox;
using UnityEngine;

public class ChatGptExample : MonoBehaviour {
    public Parameters parameters;
    ...
}
```

[Parameters in the Unity Inspector](../images/chatgpt-parameters-inspector.png) { .image-fancy }

You can also create a `Parameters` instance is to use one of the constructors. The `Parameters` class also provides a copy constructor that can be used to create a copy of an existing `Parameters` instance.

#### Properties

- `apiKey`: The API key for ChatGPT.
- `apiKeyEncryption`: The encryption method for the API key.
- `apiKeyRemoteConfigKey`: The remote configuration key for the API key.
- `apiKeyEncryptionPassword`: The password used for API key encryption.
- `model`: The ChatGPT model to use for the request.
- `temperature`: The temperature setting for the request.
- `role`: An optional role for the request.
- `timeout`: The timeout for the request, in milliseconds.
- `throttle`: The throttle for the request, in milliseconds.

#### Constructors

- `Parameters(string apiKey)`: Initializes a new `Parameters` instance with the specified API key.
- `Parameters(Parameters parameters)`: Initializes a new `Parameters` instance by copying the settings from another `Parameters` instance.

## Examples

In both examples, replace "your-api-key" with your actual API key. These examples demonstrate how to send a request to ChatGPT using `QuickRequest` and `StreamRequest` methods, and how to handle the response and errors.

### `QuickRequest`

```csharp
using AiToolbox;
using UnityEngine;

public class ChatGptExample : MonoBehaviour {
    public Parameters parameters;
    public string prompt = "Generate a character description";

    void Start() {
        ChatGpt.QuickRequest(
            prompt,
            parameters,
            response => {
                Debug.Log("Response: " + response);
            },
            (errorCode, errorMessage) => {
                var errorType = (ChatGptErrorCodes)errorCode;
                Debug.LogError("Error: " + errorType + " - " + errorMessage);
            }
        );
    }
}
```

### `StreamRequest`

```csharp
using AiToolbox;
using UnityEngine;

public class ChatGptStreamingExample : MonoBehaviour {
    public Parameters parameters;
    public string prompt = "Generate a character description";

    void Start() {
        ChatGpt.StreamRequest(
            prompt,
            parameters,
            chunk => {
                Debug.Log("Received chunk: " + chunk);
            },
            response => {
                Debug.Log("Completed with response: " + response);
            },
            (errorCode, errorMessage) => {
                var errorType = (ChatGptErrorCodes)errorCode;
                Debug.LogError("Error: " + errorType + " - " + errorMessage);
            },
            this
        );
    }

    void OnDestroy() {
        ChatGpt.CancelAllRequests();
    }
}
```
