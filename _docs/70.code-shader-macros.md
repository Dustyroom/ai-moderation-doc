---
title: "Macros for Code Shaders"
permalink: /code-shader-macros/
excerpt: "Macros for Code Shaders (ShaderLab, HLSL)"
---

## Overview

Chroma provides a set of macros that you can use in your code shaders. These macros are used to sample gradients, curves and other Chroma-specific properties.

## Usage

To use Chroma's macros, you need to include the `Chroma.hlsl` file in your shader. This file is located in the `Chroma` package in the `Chroma/Core/HLSL` folder. It is automatically imported when you install Chroma.

To include the file, add the following line to the top of your shader:

```hlsl
#include "Chroma/Core/HLSL/Chroma.hlsl"
```

## Macros

### Gradient

#### `GRADIENT`

The `GRADIENT` macro is used to declare a gradient in a shader. Under the hood this macro introduces a texture and a sampler. Here is an example:

```hlsl
Properties
{
    [Gradient] _MyGradient("My Gradient", 2D) = "white" {}
}

GRADIENT(_MyGradient)
```

#### `SAMPLE_GRADIENT`

The `SAMPLE_GRADIENT` macro allows you to sample a gradient. It has the following signature:

```hlsl
float4 SAMPLE_GRADIENT(
    float4 gradientProperty,
    float t
)
```

`gradientProperty` is the Chroma gradient property you want to sample. It can be a normal gradient, a rainbow gradient or a random gradient. `t` is the time parameter. It can be a value between 0 and 1 or a value between 0 and `gradientProperty.w`.

#### `SAMPLE_GRADIENT_X`

The `SAMPLE_GRADIENT_X` macro allows you to sample a gradient, specifiying a [`sampler2D`](https://https://docs.unity3d.com/Manual/SL-SamplerStates.html) to use. It has the following signature:

```hlsl
float4 SAMPLE_GRADIENT_X(
    float4 gradientProperty,
    sampler2D gradientSampler,
    float t
)
```

#### `SAMPLE_GRADIENT_HDR`

The `SAMPLE_GRADIENT_HDR` macro allows you to sample an HDR gradient (TODO: link). It has the same signature as `SAMPLE_GRADIENT`:

```hlsl
float4 SAMPLE_GRADIENT_HDR(
    float4 gradientProperty,
    float t
)
```

#### `SAMPLE_GRADIENT_HDR_X`

The `SAMPLE_GRADIENT_HDR_X` macro allows you to sample an HDR gradient, specifiying a [`sampler2D`](https://https://docs.unity3d.com/Manual/SL-SamplerStates.html) to use. It has the same signature as `SAMPLE_GRADIENT_X`:

```hlsl
float4 SAMPLE_GRADIENT_HDR_X(
    float4 gradientProperty,
    sampler2D gradientSampler,
    float t
)
```

### Curve

#### `CURVE`

The `CURVE` macro is used to declare a curve in a shader. Under the hood this macro introduces a texture and a sampler. Here is an example:

```hlsl
Properties
{
    [Curve] _MyCurve("My Curve", 2D) = "white" {}
}

CURVE(_MyCurve)
```

#### `SAMPLE_CURVE`

The `CHROMA_SAMPLE_CURVE` macro allows you to sample a curve. It has the following signature:

```hlsl
float CHROMA_SAMPLE_CURVE(
    float4 curveProperty,
    float t
)
```

`curveProperty` is the Chroma curve property you want to sample. `t` is the time parameter. It can be a value between 0 and 1 or a value between 0 and `curveProperty.w`.

#### `SAMPLE_CURVE_X`

The `CHROMA_SAMPLE_CURVE_X` macro allows you to sample a curve, specifiying a [`sampler2D`](https://https://docs.unity3d.com/Manual/SL-SamplerStates.html) to use. It has the following signature:

```hlsl
float CHROMA_SAMPLE_CURVE_X(
    float4 curveProperty,
    sampler2D curveSampler,
    float t
)
```

## Example

The following example shows how to use the `SAMPLE_GRADIENT` and `SAMPLE_CURVE` macros.

```hlsl
Properties
{
    [Gradient] _RainbowGradient("Rainbow Gradient", 2D) = "white" {}
}

GRADIENT(_RainbowGradient)

SubShader
{
    Pass
    {
        CGPROGRAM
        #pragma vertex vert
        #pragma fragment frag

        #include "Chroma/Core/HLSL/Chroma.hlsl"

        struct appdata
        {
            float4 vertex : POSITION;
        };

        struct v2f
        {
            float4 vertex : SV_POSITION;
        };

        v2f vert(appdata v)
        {
            v2f o;
            o.vertex = UnityObjectToClipPos(v.vertex);
            return o;
        }

        fixed4 frag(v2f i) : SV_Target
        {
            float t = dot(i.vertex, float4(1, 1, 1, 1));
            float4 color = SAMPLE_GRADIENT(_RainbowGradient, t);
            return color;
        }
        ENDCG
    }
}
```
